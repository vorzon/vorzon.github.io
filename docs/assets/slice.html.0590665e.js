import{_ as n,d as s}from"./app.ae9bb9fe.js";const a={},p=s(`<h2 id="\u7B80\u5355\u4ECB\u7ECD" tabindex="-1"><a class="header-anchor" href="#\u7B80\u5355\u4ECB\u7ECD" aria-hidden="true">#</a> \u7B80\u5355\u4ECB\u7ECD</h2><p>slice \u8868\u793A\u4E00\u4E2A\u62E5\u6709\u76F8\u540C\u7C7B\u578B\u5143\u7D20\u7684\u53EF\u53D8\u957F\u5EA6\u7684\u5E8F\u5217</p><p>slice \u4E09\u4E2A\u91CD\u8981\u5C5E\u6027\uFF1A\u6307\u9488\u3001\u957F\u5EA6\u3001\u5BB9\u91CF</p><h2 id="\u5E38\u7528\u64CD\u4F5C" tabindex="-1"><a class="header-anchor" href="#\u5E38\u7528\u64CD\u4F5C" aria-hidden="true">#</a> \u5E38\u7528\u64CD\u4F5C</h2><h3 id="\u521D\u59CB\u5316" tabindex="-1"><a class="header-anchor" href="#\u521D\u59CB\u5316" aria-hidden="true">#</a> \u521D\u59CB\u5316</h3><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">// make\u521D\u59CB\u5316\uFF0C\u5143\u7D20\u4F1A\u521D\u59CB\u5316\u4E3AT\u7C7B\u578B\u96F6\u503C</span>
s <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span>T<span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">)</span>
s <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span>T<span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">,</span> <span class="token builtin">cap</span><span class="token punctuation">)</span>

<span class="token comment">// \u5B57\u9762\u91CF\u521D\u59CB\u5316\uFF0C\u548C\u6570\u7EC4\u7684\u533A\u522B\u662F\u4E0D\u6307\u5B9A\u957F\u5EA6</span>
s <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>T<span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token comment">// \u4ECE\u539F\u6709slice\u622A\u53D6</span>
s1 <span class="token operator">:=</span> s<span class="token punctuation">[</span>i<span class="token punctuation">:</span>j<span class="token punctuation">]</span>

<span class="token comment">// copy\u51FD\u6570</span>
<span class="token function">copy</span><span class="token punctuation">(</span>dst<span class="token punctuation">,</span> src <span class="token punctuation">[</span><span class="token punctuation">]</span>T<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="cap-len" tabindex="-1"><a class="header-anchor" href="#cap-len" aria-hidden="true">#</a> cap &amp; len</h3><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token function">cap</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span>  <span class="token comment">// \u83B7\u53D6\u5BB9\u91CF</span>
<span class="token function">len</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span>  <span class="token comment">// \u83B7\u53D6\u957F\u5EA6</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="append-\u6DFB\u52A0\u5143\u7D20" tabindex="-1"><a class="header-anchor" href="#append-\u6DFB\u52A0\u5143\u7D20" aria-hidden="true">#</a> append \u6DFB\u52A0\u5143\u7D20</h3><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code>s <span class="token operator">:=</span> <span class="token function">append</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
s <span class="token operator">:=</span> <span class="token function">append</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>    <span class="token comment">// append\u591A\u4E2A</span>
s <span class="token operator">:=</span> <span class="token function">append</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> s<span class="token operator">...</span><span class="token punctuation">)</span>    <span class="token comment">// \u53EF\u4EE5append\u4E00\u4E2Aslice</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="\u5B9E\u73B0\u539F\u7406" tabindex="-1"><a class="header-anchor" href="#\u5B9E\u73B0\u539F\u7406" aria-hidden="true">#</a> \u5B9E\u73B0\u539F\u7406</h2><h3 id="slice-\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#slice-\u7ED3\u6784" aria-hidden="true">#</a> slice \u7ED3\u6784</h3><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">type</span> slice <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	array unsafe<span class="token punctuation">.</span>Pointer    <span class="token comment">// \u5B9E\u9645\u6570\u636E\uFF0C\u5E95\u5C42\u662F\u6570\u7EC4</span>
	<span class="token builtin">len</span>   <span class="token builtin">int</span>               <span class="token comment">// slice\u5B9E\u9645\u5143\u7D20\u4E2A\u6570</span>
	<span class="token builtin">cap</span>   <span class="token builtin">int</span>               <span class="token comment">// slice\u5BB9\u91CF\uFF0Clen &lt;= cap\uFF0C\u6269\u5BB9\u5176\u5B9E\u5C31\u662F\u6269cap</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="\u6269\u5BB9" tabindex="-1"><a class="header-anchor" href="#\u6269\u5BB9" aria-hidden="true">#</a> \u6269\u5BB9</h3><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token comment">// cap \u671F\u671B\u5BB9\u91CF</span>
<span class="token keyword">func</span> <span class="token function">growslice</span><span class="token punctuation">(</span>et <span class="token operator">*</span>_type<span class="token punctuation">,</span> old slice<span class="token punctuation">,</span> <span class="token builtin">cap</span> <span class="token builtin">int</span><span class="token punctuation">)</span> slice <span class="token punctuation">{</span>
    <span class="token operator">...</span><span class="token operator">...</span>

    newcap <span class="token operator">:=</span> old<span class="token punctuation">.</span><span class="token builtin">cap</span>
    doublecap <span class="token operator">:=</span> newcap <span class="token operator">+</span> newcap
    <span class="token comment">// \u5982\u679C\u671F\u671B\u5BB9\u91CF\u5927\u4E8Eslice\u539F\u6765\u5BB9\u91CFcap\u76842\u500D\uFF0C\u5219\u4F7F\u7528\u671F\u671B\u5BB9\u91CF</span>
	<span class="token keyword">if</span> <span class="token builtin">cap</span> <span class="token operator">&gt;</span> doublecap <span class="token punctuation">{</span>
		newcap <span class="token operator">=</span> <span class="token builtin">cap</span>
	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">// \u5982\u679C\u539F\u6765\u5BB9\u91CF\u5C0F\u4E8E1024(1M)\uFF0C\u5219\u6269\u5BB92\u500D</span>
		<span class="token keyword">if</span> old<span class="token punctuation">.</span><span class="token builtin">cap</span> <span class="token operator">&lt;</span> <span class="token number">1024</span> <span class="token punctuation">{</span>
			newcap <span class="token operator">=</span> doublecap
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
			<span class="token comment">// \u5982\u679C\u5927\u4E8E1024\uFF0C\u5219\u5FAA\u73AF\u6BCF\u6B21\u589E\u52A0\u539F\u6765\u5BB9\u91CF\u76841/4\uFF0C\u76F4\u5230\u5927\u4E8E\u671F\u671B\u5BB9\u91CF</span>
			<span class="token keyword">for</span> <span class="token number">0</span> <span class="token operator">&lt;</span> newcap <span class="token operator">&amp;&amp;</span> newcap <span class="token operator">&lt;</span> <span class="token builtin">cap</span> <span class="token punctuation">{</span>
				newcap <span class="token operator">+=</span> newcap <span class="token operator">/</span> <span class="token number">4</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">if</span> newcap <span class="token operator">&lt;=</span> <span class="token number">0</span> <span class="token punctuation">{</span>
				newcap <span class="token operator">=</span> <span class="token builtin">cap</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token operator">...</span><span class="token operator">...</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><p>\u603B\u7ED3\uFF1A</p><ol><li>\u5982\u679C\u671F\u671B\u5BB9\u91CF\u5927\u4E8E slice \u539F\u6765\u5BB9\u91CF cap \u7684 2 \u500D\uFF0C\u5219\u4F7F\u7528\u671F\u671B\u5BB9\u91CF</li><li>\u5426\u5219\uFF0C\u5982\u679C\u539F\u6765\u5BB9\u91CF\u5C0F\u4E8E 1024(1M)\uFF0C\u5219\u6269\u5BB9 2 \u500D</li><li>\u5982\u679C\u5927\u4E8E 1024\uFF0C\u5219\u5FAA\u73AF\u6BCF\u6B21\u589E\u52A0\u539F\u6765\u5BB9\u91CF\u7684 1/4\uFF0C\u76F4\u5230\u5927\u4E8E\u671F\u671B\u5BB9\u91CF</li><li>TODO: \u5185\u5B58\u5BF9\u9F50</li></ol>`,17);function e(t,c){return p}var o=n(a,[["render",e],["__file","slice.html.vue"]]);export{o as default};
